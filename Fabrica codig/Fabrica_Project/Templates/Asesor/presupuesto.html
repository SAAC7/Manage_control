{% extends 'core.html' %}
{% block content%}

<style>
  /* Cambiar el cursor al pasar el mouse sobre el checkbox */
  .form-check-input:hover {
    cursor: pointer;
  }

  /* Cambiar el cursor al pasar el mouse sobre el input de archivo */
  .custom-file-input:hover {
    cursor: pointer;
  }
</style>

<div class="container">
  <div class="row justify-content-center align-items-center">
    <div class="card o-hidden border-0 shadow-lg">
      <div class="text-center">
        <h1>Presupuesto</h1>
      </div>
      <form method="post">
        {% csrf_token %}
        <div class="row">
          <div class="col-6">
            <div class="form-group">
              <label for="nombreCliente">Nombre del Cliente:</label>
              <input type="text" id="nombreCliente" class="form-control form-control-user" name="nombreCliente" required>
            </div>
            <div class="form-group px-md-3">
              <input type="checkbox" id="solDesign" name="solDesign" value="True" class="form-check-input cursor-pointer">
              <label for="solDesign" class="form-check-label"> Mandar a Diseñar</label>
            </div>
            <div class="custom-file">
              <label for="miArchivo" class="custom-file-label cursor-pointer">Selecciona un archivo (PDF, RAR, JPG, PNG):</label>
              <input type="file" class="custom-file-input cursor-pointer" id="miArchivo" name="miArchivo1" onchange="updateFileName()" required>
              <small id="fileError" class="text-danger"></small>
              <br><br>
            </div>
            <div class="form-group">
            <input id="botonEnvio" class="btn btn-primary btn-lg" type="submit" value="Guardar" name="botonEnvio" disabled>
            </div>
          </div>
          <div class="col-6">
            <div class="form-group">
              <label for="descripcion">Descripción:</label>
              <textarea id="descripcion" name="descripcion" class="form-control form-control-user" rows="7" required></textarea>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
  function updateFileName() {
    var inputFile = document.getElementById('miArchivo');
    var fileName = inputFile.files[0].name; // Obtener solo el nombre del archivo
    var label = document.querySelector('.custom-file-label');
    var fileError = document.getElementById('fileError');
    var miBoton = document.getElementById("botonEnvio");
    
    // Verificar la extensión del archivo
    var allowedExtensions = /(\.pdf|\.rar|\.jpg|\.png)$/i;
    if (!allowedExtensions.exec(fileName)) {
      fileError.innerText = 'Solo se permiten archivos PDF, Imagenes o RAR.';
      label.innerText = 'Selecciona un archivo (PDF, RAR, JPG, PNG):';
      inputFile.value = ''; // Limpiar el valor del input para evitar la carga del archivo no permitido
      miBoton.disabled = true;
    } else {
      fileError.innerText = '';
      label.innerText = 'Archivo seleccionado: ' + fileName;
      
      miBoton.disabled = false;
    }
  }
</script>
{% endblock %}